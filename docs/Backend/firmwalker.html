<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Backend/firmwalker" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Firmwalker | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/img/logo.png"><meta data-rh="true" property="og:url" content="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/docs/Backend/firmwalker"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Firmwalker | Documentation"><meta data-rh="true" name="description" content="As mentioned before, firmwalker is an open-source bash script."><meta data-rh="true" property="og:description" content="As mentioned before, firmwalker is an open-source bash script."><link data-rh="true" rel="icon" href="/firmware_vault_documentation/img/logo.png"><link data-rh="true" rel="canonical" href="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/docs/Backend/firmwalker"><link data-rh="true" rel="alternate" href="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/docs/Backend/firmwalker" hreflang="en"><link data-rh="true" rel="alternate" href="https://gitlab.informatik.hs-augsburg.de/firmware_vault_documentation/docs/Backend/firmwalker" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/firmware_vault_documentation/blog/rss.xml" title="Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/firmware_vault_documentation/blog/atom.xml" title="Documentation Atom Feed"><link rel="stylesheet" href="/firmware_vault_documentation/assets/css/styles.af449ed4.css">
<script src="/firmware_vault_documentation/assets/js/runtime~main.1c870ff8.js" defer="defer"></script>
<script src="/firmware_vault_documentation/assets/js/main.83426a93.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://gitlab.informatik.hs-augsburg.de/firmware-analysis/firmware_vault/blob" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/firmware_vault_documentation/img/logo.png" alt="Documentation" class="header-logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/firmware_vault_documentation/img/logo.png" alt="Documentation" class="header-logo themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link button button--lg home navbar__link--active" href="/firmware_vault_documentation/">Home</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/firmware_vault_documentation/docs/introduction">Introduction</a></li><li><a class="dropdown__link" href="/firmware_vault_documentation/docs/Getting Started/installation">Getting Started</a></li><li><a class="dropdown__link" href="/firmware_vault_documentation/docs/Frontend/overview">Frontend</a></li><li><a class="dropdown__link" href="/firmware_vault_documentation/docs/Backend/introduction">Backend</a></li><li><a class="dropdown__link" href="/firmware_vault_documentation/docs/Documentation/docusaurus">Documentation</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://gitlab.informatik.hs-augsburg.de/firmware-analysis/firmware_vault" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link header-gitlab-link" aria-label="GitLab repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/firmware_vault_documentation/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/firmware_vault_documentation/docs/Getting Started/installation">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/firmware_vault_documentation/docs/Frontend/overview">Frontend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/firmware_vault_documentation/docs/Backend/introduction">Backend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firmware_vault_documentation/docs/Backend/introduction">Analysis Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firmware_vault_documentation/docs/Backend/implemented-modules">The Implemented Modules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/firmware_vault_documentation/docs/Backend/wrapper-documentation">Write Your Own Wrapper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/firmware_vault_documentation/docs/Backend/firmwalker">Firmwalker</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/firmware_vault_documentation/docs/Documentation/docusaurus">Documentation</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/firmware_vault_documentation/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Firmwalker</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Firmwalker</h1></header>
<p>As mentioned before, <a href="https://github.com/craigz28/firmwalker" target="_blank" rel="noopener noreferrer">firmwalker</a> is an open-source bash script.</p>
<p>The following three primary components are found in the <code>/jobs</code>directory:</p>
<ol>
<li><strong><code>firmwalker.py</code></strong>: A client-side script that interacts with the Flask API to request firmware analysis.</li>
<li><strong><code>firmwalker_service.py</code></strong>: A Flask web service that exposes an API for remote requests to analyze firmware images using Firmwalker.</li>
<li><strong><code>firmwalker_analysis.py</code></strong>: A Python script that performs the actual analysis of the firmware by invoking the open source bash script <code>firmwalker.sh</code> to process extracted firmware data, that we previously extracted with <code>binwalk</code>.</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-individual-components">The Individual Components<a href="#the-individual-components" class="hash-link" aria-label="Direct link to The Individual Components" title="Direct link to The Individual Components">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-firmwalkerpy-client-side-script">1. <strong><code>firmwalker.py</code></strong> (Client-side Script)<a href="#1-firmwalkerpy-client-side-script" class="hash-link" aria-label="Direct link to 1-firmwalkerpy-client-side-script" title="Direct link to 1-firmwalkerpy-client-side-script">​</a></h3>
<p>This script acts like the entry point for sending requests to the <strong>Firmwalker service</strong>. It is responsible for:</p>
<ul>
<li>Sending an HTTP request to the <strong>Firmwalker service</strong> (Flask API).</li>
<li>Passing the necessary parameters (<code>image_id</code>, <code>path</code>, <code>output_path</code>) to the service.</li>
<li>Handling the response from the service and printing the results.</li>
</ul>
<p>The script accepts three arguments:</p>
<ul>
<li><code>image_id</code>: The unique identifier for the firmware image from the database.</li>
<li><code>path</code>: The path to the extracted firmware image directory.</li>
<li><code>output_path</code>: The output location for the analysis results.</li>
</ul>
<p>The script constructs a <strong>POST request</strong> to the <code>/post</code> endpoint of the Flask service <code>firmwalker_service.py</code> running at <code>http://firmwalker:5004/post</code>.</p>
<p>The <strong>request</strong> body includes a JSON payload with the keys <code>image_id</code>, <code>path</code> and <code>output_path</code></p>
<p>Upon receiving a response from the Flask API:</p>
<ul>
<li>If successful , as in <code>status_code == 200</code>, the script prints the JSON <strong>response</strong> from the API, which includes the result of the firmware analysis.</li>
<li>If an error occurs, it prints the error message.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-firmwalker_servicepy-flask-api-server">2. <strong><code>firmwalker_service.py</code></strong> (Flask API Server)<a href="#2-firmwalker_servicepy-flask-api-server" class="hash-link" aria-label="Direct link to 2-firmwalker_servicepy-flask-api-server" title="Direct link to 2-firmwalker_servicepy-flask-api-server">​</a></h3>
<p>This is the <strong>Flask web service</strong> that acts as a middleman between the <strong>client</strong> <code>firmwalker.py</code> and the <strong>analysis process</strong> <code>firmwalker_analysis.py</code>.</p>
<p>The Flask service listens for <strong>POST requests</strong> on the <code>/post</code> endpoint.
The request body should contain a JSON payload with the three parameters mentioned above.</p>
<p>The service then verifies that the required parameters <code>image_id</code>, <code>path</code>, <code>output_path</code> are present in the request. It also checks if the specified firmware extraction directory (<code>extracted</code>) exists in the provided <code>path</code> and if not, prints <code>Please extract the firmware first with binwalk!</code></p>
<p>If the extraction directory is present valid, the Flask service calls <strong><code>firmwalker_analysis.py</code></strong> to perform the actual analysis, this will be explained later. It passes the <code>path</code> argument to this script.</p>
<ul>
<li>This is done using the <code>subprocess.run()</code> function, which executes the <strong><code>firmwalker_analysis.py</code></strong> script as a subprocess.</li>
</ul>
<p>After the analysis completes, the service returns a <strong>JSON response</strong>:</p>
<ul>
<li>If successful, it includes a success message along with the path to the saved output file.</li>
<li>If any error occurs, it returns an error message and logs the issue.</li>
</ul>
<p>The service logs important events, such as incoming requests, successful analyses, and errors, to a log file (<code>firmwalker.log</code>) to help with auditing and debugging.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-firmwalker_analysispy-firmware-analysis-script">3. <strong><code>firmwalker_analysis.py</code></strong> (Firmware Analysis Script)<a href="#3-firmwalker_analysispy-firmware-analysis-script" class="hash-link" aria-label="Direct link to 3-firmwalker_analysispy-firmware-analysis-script" title="Direct link to 3-firmwalker_analysispy-firmware-analysis-script">​</a></h3>
<p>This script is a wrapper around the <code>firmwalker.sh</code> script and is responsible for the actual analysis of the firmware image. It processes the extracted firmware files and generates analysis results.</p>
<p>The script takes one argument: the <strong>path to the extracted firmware directory</strong> <code>firmwalker_extracted_path</code>.</p>
<p><strong><code>firmwalker_analysis.py</code></strong> calls the <code>firmwalker.sh</code> Bash script to process the extracted firmware.
The <code>firmwalker.sh</code> script analyzes the contents of the extracted directory (e.g., checking for passwords, configuration files, etc.).</p>
<p>After running <code>firmwalker.sh</code>, the script processes its output, extracting key sections like: <code>passwd</code>, <code>shadow</code>, <code>conf files</code>, <code>bin files</code>, etc. <strong>those are defined as sections, and those sections can be added/removed.</strong> To see which sections are availabe, please refer to the following <a href="https://onedrive.live.com/?redeem=aHR0cHM6Ly8xZHJ2Lm1zL2YvcyFBdWNRTVlYSk5lZmR2R1p5ZVl0MTZINzJWQ0x2&amp;cid=DDE735C9853110E7&amp;id=DDE735C9853110E7%217784&amp;parId=DDE735C9853110E7%217782&amp;o=OneUp" target="_blank" rel="noopener noreferrer">firmwalker output</a> taken from the script&#x27;s GitHub repository.
A section is what comes after the 37 <code>#</code> charachters, for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">passwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*id_rsa*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emails</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The results are saved in separate text files for each section as well as a file for the complete output.</p>
<p>The output file and results are stored in the <code>firmwalker_results</code> directory.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="firmwalker-and-docker">Firmwalker and Docker<a href="#firmwalker-and-docker" class="hash-link" aria-label="Direct link to Firmwalker and Docker" title="Direct link to Firmwalker and Docker">​</a></h2>
<p>The goal now is for the firmwalker module to be integrated into the project&#x27;s docker environment.</p>
<p>For this, we need the <code>Dockerfile_firmwalker</code>,also found in the directory <code>/jobs</code>, which ensures the proper installation and configuration of firmwalker within the Docker container.</p>
<p>The Dockerfile begins by using <code>python:3.11</code> as the base image.
It then updates the package lists and installs <code>bash</code> for script execution.
Afterwards, it creats a python virtual environment in <code>/app/venv</code>, upgrades <code>pip</code> and installs necessary dependencies, then sets up the environment variable <code>PATH</code> to include the virtual environment.
Next, the working directroy is set to <code>/app</code> where all the needed files are copied to in the container.
The script <code>firmwalker.sh</code> is given executable permissions, and it i s specified that the container should run <code>python3 /app/firmwalker_service.py</code> when started. This initializes the Firmwalker API Service.</p>
<p>The newly made container should then be made part of the docker-compose file found in the cloned project under <code>firmware_vault/docker_compose_dir/docker-compose.yaml</code>, this is done by adding the following as a service:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">firmwalker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> firmwalker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../jobs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dockerfile_firmwalker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> executor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/tasks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> scraper_downloads</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/amos_project/downloads/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DB_CONTAINER=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE_DB_CONTAINER</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_USER=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE_USER</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> MYSQL_PASSWORD=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE_PASSWORD</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DB_SCHEMA=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE_SCHEMA</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> DB_PORT=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">DATABASE_PORT</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> firmware_network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5004:5004&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We start by specifying the name of the service, then the name of the container.
under <code>build</code> we have <code>context</code> which points to the files needed to build the image, as well as <code>dockerfile</code> which specifies which Dockerfile to use.</p>
<p>Then, we define the needed volumes to presist data and share it between containers or use data shared from other containers.
Here we mount the volumes <code>executor</code> and <code>scraper_downloads</code> (found in the cloned project under <code>firmware_vault/docker_compose_dir/volumes</code>) respectively to the <code>/tasks</code> and <code>/amos_project/downloads/</code> directories inside the container.</p>
<p>Next, the needed environment variables are set, and the network <code>firmware_network</code> is defined as the network for this container to join. This makes sure that our container will be connected to the same Docker network as the other services in our compose setup.</p>
<p>Lastly, with</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5004:5004&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>we map the port <strong>5004</strong> from inside the container to port <strong>5004</strong> on the host machine.</p>
<p>On a last note, we need to make sure to copy the <strong>client-side</strong> script <code>firmwalker.py</code> to the executor container. This is done by adding the following line:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">COPY firmwalker.py /working_dir</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to the <code>Dockerfile_executor</code> file found under <code>/jobs</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/nmkzzztos/firmware_vault_documentation/tree/main/docs/Backend/firmwalker.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/firmware_vault_documentation/docs/Backend/wrapper-documentation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Write Your Own Wrapper</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/firmware_vault_documentation/docs/Documentation/docusaurus"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Docusaurus</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-individual-components" class="table-of-contents__link toc-highlight">The Individual Components</a><ul><li><a href="#1-firmwalkerpy-client-side-script" class="table-of-contents__link toc-highlight">1. <strong><code>firmwalker.py</code></strong> (Client-side Script)</a></li><li><a href="#2-firmwalker_servicepy-flask-api-server" class="table-of-contents__link toc-highlight">2. <strong><code>firmwalker_service.py</code></strong> (Flask API Server)</a></li><li><a href="#3-firmwalker_analysispy-firmware-analysis-script" class="table-of-contents__link toc-highlight">3. <strong><code>firmwalker_analysis.py</code></strong> (Firmware Analysis Script)</a></li></ul></li><li><a href="#firmwalker-and-docker" class="table-of-contents__link toc-highlight">Firmwalker and Docker</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://gitlab.informatik.hs-augsburg.de/firmware-analysis" target="_blank" rel="noopener noreferrer" class="footer__link-item">App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitlab.informatik.hs-augsburg.de/firmware-analysis" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.tha.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">THA<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/TH_Augsburg" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/hochschuleaugsburg/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/user/HochschuleAugsburg" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/THAugsburg/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.tha.de/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/firmware_vault_documentation/img/tha.svg" alt="Firmware-Analyse logo" class="footer__logo footer-logo themedComponent_mlkZ themedComponent--light_NVdE" width="150"><img src="/firmware_vault_documentation/img/tha.svg" alt="Firmware-Analyse logo" class="footer__logo footer-logo themedComponent_mlkZ themedComponent--dark_xIcU" width="150"></a></div><div class="footer__copyright">Copyright © 2025 Technische Hochschule Augsburg</div></div></div></footer></div>
</body>
</html>